<html layout:decorate="~{layout}">
  <div layout:fragment="content">
    <div class="TOP100_container">
      <div class="TOP100_cont_sec">
        <div class="chartList_nav">
          <div class="chartList_nav_sec">
            <div class="chartList_nav_TOP100"><a href="/chart/TOP100">TOP100</a></div>
            <div class="chartList_nav_genreChart"><a href="/chart/genreChart">장르별 차트</a></div>
          </div>
        </div>
        <div class="body_chart_container">
          <span>TOP 100</span>
          <div class="TOP100_body">
            <div class="TOP100_nav">
              <ul>
                <li><span class="TOP100_Rank">순위</span></li>
                <li><span class="Rank_fluctuationRate"></span></li>
                <li><span class="music_thumbnail"></span></li>
                <li><span class="music_title">곡 제목</span></li>
                <li><span class="music_studio">스튜디오</span></li>
                <li><span class="musicLike">좋아요</span></li>
                <li><span class="music_import_myPlayList">담기</span></li>
                <li><span class="music_play">듣기</span></li>
              </ul>
            </div>
            <div class="TOP100_list">
              <ul>
                <!-- 타임리프를 사용하여 musicList라는 변수에 저장된 음악 데이터를 반복하여 출력 -->
                <li class="TOP100_list-num" th:each="music, iterStat : ${musicList}">
                  <span class="TOP100_number" th:text="${iterStat.index + 1}"></span>
                  <div class="TOP100_musicTitle">
                    <div class="thumbImg">
                      <img th:src="@{/uploadImgs/{filename}(filename=${music.thumbnailImg})}" alt="사진X"></div>
                    <div class="classnull"></div>

                    <a th:if="${#authorization.expression('isAuthenticated()')}"
                       class="musicTi"
                       th:href="@{|/chart/music/detail/${music.id}|}">
                      <span th:text="${music.musicTitle}"></span>
                    </a>
                    <a th:if="${#authorization.expression('isAnonymous()')}"
                       class="musicTi"
                       onclick="alert('곡 정보를 확인하려면 로그인이 필요합니다.'); return false;">
                      <span th:text="${music.musicTitle}"></span>
                    </a>

                    <a th:if="${#authorization.expression('isAuthenticated()')}"
                       class="upstu"
                       th:href="@{|/chart/music/detail/${music.id}|}">
                      <span th:text="${music.studio.member.username}"></span>
                    </a>
                    <a th:if="${#authorization.expression('isAnonymous()')}"
                       class="upstu"
                       onclick="alert('곡 정보를 확인하려면 로그인이 필요합니다.'); return false;">
                      <span th:text="${music.studio.member.username}"></span>
                    </a>
                  </div>
                  <div class="music_likeCount">
                    <span><i class="fa-regular fa-heart"></i></span>
                    <span th:text="${#lists.size(music.musicLikers)}"></span>
                  </div>
                  <div class="music_imp">
                    <span class="plus-icon"><i class="fa-solid fa-plus"></i></span>
                    <span class="check-icon hidden"><i class="fa-solid fa-check"></i></span>
                  </div>
                  <div class="music_p">
                    <span><i class="fa-solid fa-play"></i></span>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    
  </div>
  <script>
    
    // 플레이리스트에 담기 후 체크 표시
    document.addEventListener("DOMContentLoaded", function() {
      var plusIcon = document.querySelector('.plus-icon');
      var checkIcon = document.querySelector('.check-icon');

      plusIcon.addEventListener('click', function() {
          // 플레이리스트에 추가하는 로직을 이곳에 작성하세요.
          
          // 아이콘 변경
          plusIcon.classList.add('hidden');
          checkIcon.classList.remove('hidden');
      });
  });
  </script>

</html>